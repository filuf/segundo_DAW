<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="author" content="" />
    <link rel="icon" type="image/x-icon" href="https://iesventura.es/_ies_datos/LOGO_new.jpg">
    <title>Tarea 2-8-1</title>
</head>

<body>
    <script>
        /* Pregunta al usuario si desea abrir una cuenta de ahorro.
           - Si acepta, continúa con el programa. 
           - Si no, vuelve a preguntar.
        */
        let objetivo = 0.;
        var ahorro = 0;
        var breakLoop = false;

        do {
            breakLoop = confirm("[?] ¿Quieres abrir una cuenta?");
        } while (!breakLoop);
        console.log("El usuario a aceptado nuestra estafa")
        alert("[+] Enhorabuena, acabas de abrir una cuenta")

        /* Solicita al usuario la cantidad positiva que desee ahorrar. */
        breakLoop = false;
        while (!breakLoop) {
            try {
            objetivo = prompt("[?] ¿Cuanto quieres ahorrar en total?");
            if (isNaN(objetivo)) {
                throw new Error("[!] La cantidad debe ser un número");
            } else if (objetivo <= 0) {
                throw new Error("[!] No se puede ahorrar una cantidad negativa o 0");
            }
            //si ha llegado hasta aquí es que el objetivo es mayor a 0
            objetivo = parseFloat(objetivo);
            breakLoop = true;
            } catch(error) {
                alert(error);
            }
        }

        /* Pregunta al usuario cuánto dinero quiere añadir. 
           El dinero se añadirá a lo ahorrado.
           Cuando la hucha haya cumplido el objetivo,
           se mostrará un texto de objetivo conseguido 
           con la cantidad ahorrada.
        */
        ahorro = 0.00;
        let temp;
        while (ahorro < objetivo) {
            temp = prompt("[?] ¿Cuanto quieres añadir a la cuenta bancaria? -> ");
            if (isNaN(temp)) {
                alert("[!] Solo puedes ingresar dinero, tús palabras valen mucho pero no para este banco");
            } else if (temp < 0) {
                alert("[!] No permitimos retirar dinero hasta alcanzar el objetivo ¡¡¡TÚ PUEDES, SIGUE AHORRANDO!!!");
            } else {
                temp = parseFloat(temp);
                ahorro += temp;
                alert("[+] Se han añadido " + temp.toFixed(2) + "€ a tú cuenta bancaria");
            }
            if (ahorro < objetivo)
                alert("[+] El total actual de tú cuenta de ahorros es de " + ahorro.toFixed(2) + "€ te faltan " + (objetivo.toFixed(2) - ahorro.toFixed(2)).toFixed(2) + "€ para llegar a tú objetivo de " + objetivo.toFixed(2));
            else
                alert("[+] ¡¡¡OBJETIVO CONSEGUIDO, HAS AHORRADO " + ahorro.toFixed(2) + "€ !!!")
        }       
    </script>
</body>

</html>
